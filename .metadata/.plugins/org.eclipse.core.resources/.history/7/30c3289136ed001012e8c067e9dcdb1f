package study20260109;

public class BingoBoard {
	int[] board;
	int[] col = new int[5],
			row = new int[5],
			diag = new int[2];
	int lines;
	String owner;

	public BingoBoard(String owner) {
		board = new int[25];
		lines = 0;
		this.owner = owner;
		
		for(int i = 0; i < 25; i++) {
			board[i] = (int) (Math.floor(Math.random() * Bingo.NUM_RANGE) + 1);
			
			for(int j = 0; j < i; j++) {
				if (board[j] == board[i]) {
					i--;
					break;
				}
			}
		}
	}
	
	public void checkLine() {
		lines = 0;
		diag[0] = 0;
		diag[1] = 0;
		
		for (int i = 0; i < 5; i++) {
			col[i] = 0;
			row[i] = 0;
			for (int j = 0; j < 5; j++) {
				if (board[(i * 5) + j] == 0) col[i]++;
				if (board[(j * 5) + i] == 0) row[i]++;
			}
			if (board[i * 6] == 0) diag[0]++;
			if (board[i * 4 + 4] == 0) diag[1]++;
			
			if (col[i] == 5) lines++;
			if (row[i] == 5) lines++;
		}
		
		if (diag[0] == 5) lines++;
		if (diag[1] == 5) lines++;
	}
	
	public void printBoard() {
		System.out.println(owner + "의 빙고판");
		
		System.out.println("┌───┬───┬───┬───┬───┐");
		for (int i = 0; i < 5; i++) {
			for (int j = 0; j < 5; j++) {
				if (board[(i * 5) + j] != 0) System.out.printf("│%3d", board[(i * 5) + j]);
				else System.out.printf("│   ");
			}
			if (i != 4)	System.out.println("│\n├───┼───┼───┼───┼───┤");
			else System.out.println("│\n└───┴───┴───┴───┴───┘");
		}
		
		System.out.println(owner + "의 빙고수 : " + lines);
	}
	
	public boolean bingo(int num) {
		for (int i = 0; i < board.length; i++) {
			if (board[i] == num) {
				board[i] = 0;
				col[i % 5]++;
				row[i / 5]++;
				if (i % 4 == 0) diag[1]++;
				else if (i % 6 == 0) diag[0]++;
				return true;
			}
		}
		return false;
	}
}
